<!DOCTYPE html>
<html>
<head>
	<title>Parent</title>
</head>
<body>
	<script>
		var iframe = document.createElement('iframe');
		iframe.src = 'about:blank';
		document.body.appendChild(iframe);

		iframe.onload = function() {
			const injectedCode = `Object.defineProperty(window, '__ZK_PARENT', {
				get: function() {
					return window.parent["__ZK_PARENT"];
				},
				set: function(value){
					window.parent["__ZK_PARENT"] = value
				}
			});`
			const nextScriptElement = iframe.contentWindow.document.createElement("script");
			nextScriptElement.textContent= injectedCode
			iframe.contentWindow.document.body.appendChild(nextScriptElement);


			const oldIframeCode = `window.__ZK_PARENT ="I am from iframe text"`
			const nextScriptElement2 = iframe.contentWindow.document.createElement("script");
			nextScriptElement2.textContent= oldIframeCode
			iframe.contentWindow.document.body.appendChild(nextScriptElement2);


			console.log(window.__ZK_PARENT)
		}
	</script>
</body>
</html>
